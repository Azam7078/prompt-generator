import streamlit as st
import google.generativeai as genai

# ุฅุนุฏุงุฏ ูุงุฌูุฉ ุงููููุน
st.set_page_config(page_title="ูููุฏ ุงูุฃูุงูุฑ ุงูุงุญุชุฑุงููุฉ", page_icon="๐ธ", layout="centered")
st.title("ูููุฏ ุฃูุงูุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุชุตููุฑ ูุงูุชุตููู ๐ธ")
st.write("ุงูุชุจ ููุฑุชู ุงูุจุณูุทุฉุ ูุณูุญูููุง ุฅูู ุฃูุฑ (Prompt) ุฅูุฌููุฒู ุงุญุชุฑุงูู ุฌุงูุฒ ููุงุณุชุฎุฏุงู.")

# ููุงู ูุถุน ููุชุงุญ Google ุงูุณุฑู
API_KEY = "AIzaSyE81EYZCH_j2wuLHfFI6alHKpV0acVCkE"
genai.configure(api_key=API_KEY)

# ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูุงุฎุชูุงุฑ ุงููุณู
category = st.selectbox(
    "ุงุฎุชุฑ ูุฌุงู ุงูุชุตููู:",
    ("ุชุตููุฑ ููุชุฌุงุช ุงููููุฉ ูุงูููุงูู โ", "ุฅุถุงุกุฉ ุงุณุชูุฏูู ูุฎูููุงุช ููููุชุฌุงุช ๐งด", "ูุฌุณูุงุช ูุชุตุงููู ูุนูุงุฑูุฉ 3D ๐ข")
)

# ูุฑุจุน ุฅุฏุฎุงู ุงูููุฑุฉ ูู ุงููุณุชุฎุฏู
user_idea = st.text_input("ุงูุชุจ ููุฑุชู ููุง (ูุซุงู: ุนุทุฑ ุนูู ุทุงููุฉ ุฎุดุจูุฉ):")

# ุงูุชูุฌูู ุงูููุฏุณู ุงูุตุงุฑู ููุฐูุงุก ุงูุงุตุทูุงุนู (System Instruction)
system_instruction = f"""
ุฃูุช ุฎุจูุฑ ุนุงููู ูู ุตูุงุบุฉ ุฃูุงูุฑ ุชูููุฏ ุงูุตูุฑ (Prompt Engineering). 
ุงููุฌุงู ุงููุฎุชุงุฑ ูู: {category}.
ุงููุทููุจ: ุชุญููู ุงูููุฑุฉ ุงูุจุณูุทุฉ ุงูุชุงููุฉ ุฅูู ุฃูุฑ (Prompt) ุฅูุฌููุฒู ุทูููุ ุงุญุชุฑุงููุ ูููุตู ุฌุฏุงู ูุฑูุฒ ุนูู ุงูุฅุถุงุกุฉ ุงูุณูููุงุฆูุฉุ ุฒูุงูุง ุงููุงููุฑุงุ ูุงูุนุฏุณุงุช.
ูุงุนุฏุฉ ุตุงุฑูุฉ ูููุฒูุฉ: ูุฌุจ ุฃู ููุชุตุฑ ุงูุฃูุฑ ุนูู ุงูุนูุงุตุฑ ุงูุฌุงูุฏุฉ ูุงูุจูุฆุฉ ุงููุญูุทุฉ. ููููุน ููุนุงู ุจุงุชุงู ุชุถููู ุฃู ุนูุงุตุฑ ุจุดุฑูุฉ ูู ุงููุดูุฏุ ููุฌุจ ุงุณุชุจุนุงุฏ ุฃู ูุตู ููุฌูู ุฃู ุฃูุฏู ูุณุงุฆูุฉ ููุงุฆูุงู ููุชูุงูู ุงูุฅุฎุฑุงุฌ ูุน ุงูุณูุงุณุงุช ุงูุชุฌุงุฑูุฉ.
ุงูููุฑุฉ ุงูุจุณูุทุฉ: {user_idea}
"""

# ุฒุฑ ุชูููุฏ ุงูุฃูุฑ
if st.button("ุชูููุฏ ุงูุฃูุฑ ุงูุงุญุชุฑุงูู โจ"):
    if user_idea:
        with st.spinner("ุฌุงุฑู ุตูุงุบุฉ ุงูุฃูุฑ ุงูุงุญุชุฑุงูู..."):
            try:
                # ุงุณุชุฏุนุงุก ูููุฐุฌ Gemini
                model = genai.GenerativeModel('gemini-1.5-pro')
                response = model.generate_content(system_instruction)
                
                # ุนุฑุถ ุงููุชูุฌุฉ
                st.success("ุชู ุชูููุฏ ุงูุฃูุฑ ุจูุฌุงุญ!")
                st.text_area("ุงูุฃูุฑ (Prompt) ุฌุงูุฒ ูููุณุฎ:", response.text, height=250)
            except Exception as e:
                st.error("API_KEY = "AIzaSyE81EYZCH_j2wuLHfFI6alHKpV0acVCkE)
    else:
        st.warning("ุงูุฑุฌุงุก ูุชุงุจุฉ ุงูููุฑุฉ ุฃููุงู.")
